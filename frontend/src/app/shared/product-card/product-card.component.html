<!-- Product Card -->
<div class="card me-3" >
    <!-- <img [src]="url + '/uploads' + product.imageUrl
    .substring(8)
    "
    class="card-img-top" alt="{{product.name}}" 
    style="object-fit: cover;"> -->
    <img [src]="url + product.imageUrl
    .substring(8)
    "
    class="card-img-top" alt="{{product.name}}" 
    style="object-fit: cover;">
    <span class="badge position-absolute" style="top: 10px; left: 10px"><div class="ribbon">
      <span >-70%</span>
    </div></span> m  
    <h2>
    <span class="badge position-absolute fs-6" style="top: 10px; right: 10px; ; background-color:#fd0804">Best Seller</span>
  </h2>
    <div class="card-body d-flex flex-column gap-1">
      <h5 class="card-title">{{product.name}}</h5>
      
      <div class="wishlist-heart-group position-absolute border rounded-circle" style=" opacity:90%; top: 330px;left:330px; background-color:aliceblue">
        <!-- <input name="product-333" id="product-333" data-product-id="333" (change)="toggleWishList()" [(ngModel)]="product.wishlist" type="checkbox" />
        <label for="product-333" data-hover-text="Wish List"> -->
         
          <input 
          
    [attr.data-product-id]="product.id"  
    id="product-{{ product.id }}" 
    (change)="toggleWishlist()" 
    [(ngModel)]="product.wishlist" 
    type="checkbox" />

    <!-- <input

    [id]="'product-' + product.id"
    type="checkbox" [checked]="isInWishlist(product.id)" 
    (change)="toggleWishlist(product)"
    > -->

  <label for="product-{{ product.id }}" data-hover-text="Wish List">
                <svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" version="1.1" x="0px" y="0px" viewBox="0 0 100 100">
                        <g transform="translate(0,-952.36218)"><path style="color:#000000;enable-background:accumulate;" d="m 34.166665,972.36218 c -11.41955,0 -19.16666,8.91891 -19.16666,20.27029 0,19.45943 15,27.56753 35,39.72973 20.00001,-12.1622 34.99999,-20.2703 34.99999,-39.72973 0,-11.35137 -7.7471,-20.27029 -19.16665,-20.27029 -7.35014,0 -13.39148,4.05405 -15.83334,6.48647 -2.44185,-2.43241 -8.48319,-6.48647 -15.83334,-6.48647 z" fill="transparent" id="heart-path" stroke="#737373" stroke-width="5" marker="none" visibility="visible" display="inline" overflow="visible"/></g>
                </svg>
        </label>
</div>

      
      <div class="mt-auto d-flex justify-content-between align-items-center">
        <select class="form-select form-select-sm" name="selectedQuantitySes" [(ngModel)]="selectedQuantity">
          <!-- <option *ngIf="itemAndPrice.length === 0" disabled>Loading...</option> -->
          <option *ngFor="let qty of itemAndPrice" [value]="qty.value">{{qty.label}}</option>
        </select>
      </div>
      <div class="d-flex justify-content-end w-100"> <!-- New wrapper for button -->
        <div class="d-flex justify-content-start w-100"> <!-- New wrapper for button -->
          <a [routerLink]="['/products', product.id]">View Details</a>   
          <p class="card-text text-muted">â‚¹ {{product.price * selectedQuantity}}</p>        
    </div>
    <div *ngIf="cartQuantity > 0; else addToCartButton" class="d-flex align-items-center">
          <button class="btn btn-sm btn-danger" (click)="decreaseQuantity()"><i class="bi bi-dash-lg"></i></button>
          <span class="mx-2 fs-5">{{ cartQuantity }}</span>
          <button class="btn btn-sm btn-danger" (click)="increaseQuantity()"><i class="bi bi-plus-lg"></i></button>
      </div>

        <!-- Add to Cart Button -->
    <ng-template #addToCartButton>
      <button class="btn btn-md" style="background-color: #CD1C18; color: aliceblue;" (click)="addToCart()">Add To Cart</button>
    </ng-template>
    </div>
  </div>
  
</div>